<!doctype html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/ui.jqgrid-bootstrap.css" />
</head>

<body>
    <!--[if lt IE 8]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <div id="demo">
        <vuetable api-Url="http://localhost:3000/rsqa"></vuetable>
    </div>

    <script type="text/x-template" id="vuetable">
        <div>
            <table id="jqGrid"></table>
            <div id="jqGridPager"></div>
        </div>
    </script>

    <script src="js/vendor/jquery.min.js"></script>
    <script src="js/plugins/jquery-ui.min.js"></script>
    <script src="js/plugins/i18n/grid.locale-cn.js"></script>
    <script src="js/plugins/jquery.jqGrid.min.js"></script>
    <script>
		$.jgrid.defaults.width = 780;
		$.jgrid.defaults.responsive = true;
		$.jgrid.defaults.styleUI = 'Bootstrap';
	</script>
    <script src="js/vendor/vue.min.js"></script>
    <script src="js/plugins/bootstrap.min.js"></script>
    <script>
            Vue.component('vuetable', {
                    template: '#vuetable',
                    props: {
                        apiUrl: String,
                    },
                    data: function() {
                        return {
                        }
                    },
                    methods: {                        
                        fetchData: function() {
                            var self = this;
                            console.log(self.apiUrl);  

                            $("#jqGrid").jqGrid({
                                url: "http://localhost:3000/rsqa",
                                mtype: "GET",
                                datatype: "json",
                                colModel: [{
                                    name: "ruleId",
                                    label: "规则标识码",
                                    width: 100
                                }, {
                                    name: "ruleBelongType",
                                    label: "规则归属类型",
                                    width: 120            
                                },{
                                    name: "rstSts",
                                    label: "默认状态值",
                                    width: 100
                                },{
                                    name: "rstBelongTo",
                                    label: "结果归属物",
                                    width: 100
                                },{
                                    name: "evntCount",
                                    label: "事件总数",
                                    width: 100
                                },{
                                    name: "evntCount",
                                    label: "事件总金额",
                                    width: 100                   
                                },{
                                    name: "upRptFlg",
                                    label: "可上报标志",
                                    width: 100
                                },{
                                    name: "evntCountSet",
                                    label: "事件总数结果组合"
                                },{
                                    name: "evntSumAmtSet",
                                    label: "事件金额组合"
                                },{
                                    name: "memoDes",
                                    label: "备注",
                                    width: 100
                                }],
                                loadonce: true,
                                viewrecords: true,
                                caption: '规则计算结果',
                                width: 1280,
                                height: 250,
                                rowNum: 10,
                                colMenu : true,
                                coloptions : {sorting:true, columns: true, filtering: false, seraching:false, grouping:false, freeze : false},
                                shrinkToFit : true,
                                pager: "#jqGridPager"
                            });   
                            $('#jqGrid').jqGrid('navGrid',"#jqGridPager", {                
                                search: false, // show search button on the toolbar
                                add: false,
                                edit: false,
                                del: false,
                                refresh: true
                            });                        
                        }
                    },

                    created: function() {
                        console.log("我被创建了")
                        this.fetchData();
                    }
            })

            var demo = new Vue({
                el: '#demo'
            });        
    </script>
</body>

</html>